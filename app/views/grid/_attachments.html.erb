<% if @row.has_attachment? %>  <table id="attachments-list-<%= @row.uuid %>">    <thead>      <tr>        <th class="list-header-string"><%= t 'field.attachments' %></th>      </tr>    </thead>    <tbody>      <% for document in @row.attachments %>        <% if document.document_file_name.present? and document.document_updated_at.present? %>          <tr id="row-image-<%= @row.uuid %>-<%= document.id.to_s %>">            <td>            <% if user_signed_in? and @grid.can_update?(@row) %>              <div id="actions-image-<%= @row.uuid %>-<%= document.id.to_s %>"                       class="actions float-actions"                       style="display: none;">                <span class="mini-button" title="<%= t 'actions.delete_help' %>">                  <a id="delete-image-<%= @row.uuid %>-<%= document.id.to_s %>">                    <%= t 'actions.delete' %>                  </a>                </span>              </div>              <script>                $("#row-image-<%= @row.uuid %>-<%= document.id.to_s %>").hover(                  function (event){                    $("#actions-image-<%= @row.uuid %>-<%= document.id.to_s %>").                      css({left:100}).                      show();                    $(this).addClass("highlighted");                  },                  function (event){                    $("#actions-image-<%= @row.uuid %>-<%= document.id.to_s %>").hide();                    $(this).removeClass("highlighted");                  }                );                $("#delete-image-<%= @row.uuid %>-<%= document.id.to_s %>").click(function (event){                  $("#row-image-<%= @row.uuid %>-<%= document.id.to_s %>").html('<%= escape_javascript(render :partial => "layouts/loading") %>');                  $.ajax("<%= url_for(delete_attachment_path(:grid => @grid.uuid,                                                             :row => @row.uuid,                                                             :id => document.id)) %>")                   .done(function (event){                      $("#attachments-<%= @row.uuid %>").load("<%= url_for(attachments_path(:grid => @grid.uuid,                                                                                            :row => @row.uuid)) %>");                      if ($("#more-button").attr('checked')) {                        $("#more-content").load("<%= url_for(details_path(:grid => @grid.uuid,                                                                          :row => @row.uuid)) %>");                      }                   });                });              </script>            <% end %>            <% if document.photo? %>              <%= link_to document.document.url do %><%= image_tag document.document(:mini) %><% end %>            <% else %>              <%= link_to document.original_file_name, document.document.url %>            <% end %>            <small>              (<%= number_to_human_size document.document_file_size %>)              <%= display_created_time_by(document, document.who_created, document.create_user_uuid).html_safe %>              <%= display_new(document.document_updated_at) %>            </small>            </td>          </tr>        <% end %>      <% end %>    </tbody>  </table><% end %>