<% if user_signed_in? %>
  <div class="slideButton">
    <input type="checkbox" id="navigator-button"  <%= session[:hide_navigator] ? '' : 'checked' %> />
    <label for="navigator-button"></label>
  </div>
<% end %>

<span class="button">
  <%= link_to_unless_current(icon("home") + ("&nbsp;" + I18n.t('general.home')).html_safe, 
                            {:controller => '/home', :action => 'index'}) do |name| %>
    <span class="highlighted"><%= name %></span>
  <% end %>
</span>
<% if @workspaces.present? %>
	<% for row in @workspaces.row_all %>
	  <div class="button" title="<%= row.description.html_safe %>">
		  <%= link_to_unless_current(row.name.html_safe, 
            {:controller => '/rows', 
             :action => 'show', 
             :grid_id => Workspace::ROOT_UUID, 
             :id => row.uuid }) do |name| %>
        <span class="highlighted"><%= name %></span>
      <% end %>
    </div>																					    		
	<% end %>
<% end %>

<script>
  function showNavigator(updateFlag) {
    if ($("#navigator-button").attr('checked')) {
      if(updateFlag) {
        $.ajax("<%= url_for(unset_path(:flag => "hide_navigator")) %>");
      }
      $("#navigator").show();
      $("#main-area").removeClass("large-area");
      $("#main-area").addClass("main-area");
    } 
    else {
      $("#navigator").hide();
      $("#main-area").removeClass("main-area");
      $("#main-area").addClass("large-area");
      if(updateFlag) {
        $.ajax("<%= url_for(set_path(:flag => "hide_navigator")) %>");
      }
    }
  };
  showNavigator(false);
  $("#navigator-button").click(function (event){
    showNavigator(true);
  });
</script>