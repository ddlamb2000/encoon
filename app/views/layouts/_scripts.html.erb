<script>  $(document).ready(function(){    function showNavigator(updateFlag) {      if ($("#navigator-button").attr('checked')) {        if(updateFlag) $.ajax("/hide_navigator/__unset");        $("#navigator").show(300);        $("#main-area").removeClass("large-area").addClass("main-area");      }       else {        $("#navigator").hide(300);        $("#main-area").removeClass("main-area").addClass("large-area");        if(updateFlag) $.ajax("/hide_navigator/__set");      }    };    showNavigator(false);    $("#navigator-button").click(function (event){      showNavigator(true);    });    <% if session[:history_table].present? %>      function showHistory(updateFlag) {        if ($("#history-button").attr('checked')) {          $("#history-content").            html('<%= escape_javascript(render :partial => "layouts/loading") %>').            show(300).            load("<%= url_for(history_path) %>");          $("#history-title").addClass("highlighted");        }         else {          $("#history-title").removeClass("highlighted");          $("#history-content").hide(300);          if(updateFlag) $.ajax("/show_history/__unset");        }      };      showHistory(false);      $("#history-button").click(function (event){        showHistory(true);      });      $("#history-label").click(function (event){        $("#history-button").attr('checked', true);        showHistory(true);      });    <% end %>    <% unless not user_signed_in? or @grid.nil? or @row.nil? %>      function showDetails(updateFlag) {        if ($("#more-button").attr('checked')) {          $("#more-content").            html('<%= escape_javascript(render :partial => "layouts/loading") %>').            show(300).            load("<%= url_for(details_path(:grid => @grid.uuid,                                           :row => @row.uuid)) %>");          $("#more-title").addClass("highlighted");        }         else {          $("#more-title").removeClass("highlighted");          $("#more-content").hide(300);          if(updateFlag) $.ajax("/show_details/__unset");        }      };      showDetails(false);      $("#more-button").click(function (event){        showDetails(true);      });      $("#more-label").click(function (event){        $("#more-button").attr('checked', true);        showDetails(true);      });    <% end %>    $('a.disabled').live('click', function(event){        event.preventDefault();    });  });</script>