<script>  $(document).ready(function(){    function showNavigator(updateFlag) {      if ($("#navigator-button").attr('checked')) {        if(updateFlag) $.ajax("/hide_navigator/__unset");        $("#navigator").show(300);        $("#main-area").removeClass("large-area").addClass("main-area");      }       else {        $("#navigator").hide(300);        $("#main-area").removeClass("main-area").addClass("large-area");        if(updateFlag) $.ajax("/hide_navigator/__set");      }    };    showNavigator(false);    $("#navigator-button").click(function (event){      showNavigator(true);    });    <% if session[:history_table].present? %>      function showHistory(updateFlag) {        if ($("#history-button").attr('checked')) {          $("#history-content").            html('<%= escape_javascript(render :partial => "layouts/loading") %>').            show(300).            load("<%= url_for(history_path) %>");          $("#history-title").addClass("highlighted");        }         else {          $("#history-title").removeClass("highlighted");          $("#history-content").hide(300);          if(updateFlag) $.ajax("/show_history/__unset");        }      };      showHistory(false);      $("#history-button").click(function (event){        showHistory(true);      });      $("#history-label").click(function (event){        $("#history-button").attr('checked', !$("#history-button").attr('checked'));        showHistory(true);      });    <% end %>  });</script>