<article>
  <%= form_for :home, :url => refresh_path do |f| %>
    <span class="button highlighted">
      <%= t('field.asof_date') %>
      <%= display_warning_current_date(session[:as_of_date]) %>
    </span>
    <% if session[:lock_as_of_date] %>
      <%= I18n.l(session[:as_of_date]) %>
    <% else %>
      <%= f.datepicker 'session_date', 
                       :showButtonPanel => true,
                       :numberOfMonths => 2,
                       :changeMonth => true,
                       :changeYear => true,
                       :defaultDate => session[:as_of_date].nil? ? nil : session[:as_of_date].strftime(t('datepicker.decode')), 
                       :value => session[:as_of_date].nil? ? nil : I18n.l(session[:as_of_date]),
                       :dateFormat => t('datepicker.format'),
                       :dayNamesMin => t('datepicker.dayNamesMin'),
                       :monthNames => t('datepicker.monthNames'),
                       :monthNamesShort => t('datepicker.monthNamesShort'),
                       :currentText => t('datepicker.currentText'),
                       :closeText => t('datepicker.closeText'),
                       :size => "10x1", 
                       :onchange => 'this.form.submit()' %>
    <% end %>
  <% end %>
</article>