<script>  function showTable(loadUrl, gridId, updateFlag) {    if ($("#grid-button-" + gridId).attr('checked')) {      if(updateFlag) $.ajax("/" + gridId + "/__set");      $("#grid-" + gridId).        html('<%= escape_javascript(render :partial => "layouts/loading") %>').        show(300).        load(loadUrl);      $("#detail-grid-label-" + gridId).addClass("highlighted");    }     else {      $("#detail-grid-label-" + gridId).removeClass("highlighted");      $("#grid-" + gridId).hide(300);      if(updateFlag) $.ajax("/" + gridId + "/__unset");    }  };</script><% content_for :navigator do %>  <article>    <ul>      <% if @grid.uuid == GRID_UUID %>        <li>          <%= link_to(@workspace,                      show_workspace_path(:workspace => @workspace.display_uri)) %>          <ul>            <li>              <%= @grid.row_title(@row) %>              <%= render :partial => 'navigation_attached_grids' %>            </li>          </ul>        </li>      <% else %>        <% if @workspace.uuid != SYSTEM_WORKSPACE_UUID %>          <li>            <%= link_to(@workspace,                        show_workspace_path(:workspace => @workspace.display_uri)) %>            <ul>              <% if @grid.uuid != WORKSPACE_UUID %>                <li>                  <%= link_to_unless_current @grid,                                             show_path(                                               :workspace => SYSTEM_WORKSPACE_URI,                                               :grid => GRID_UUID,                                                :row => @grid.display_uri) %>                  <ul>                    <li>                      <%= @grid.row_title(@row) %>                      <%= render :partial => 'navigation_attached_grids' %>                    </li>                  </ul>                </li>              <% end %>            </ul>          </li>        <% else %>          <li>            <%= @grid.row_title(@row) %>            <%= render :partial => 'navigation_attached_grids' %>          </li>        <% end %>      <% end %>
    </ul>  </article>  <article>    <% if user_signed_in? %>      <span id="more-title" class="button info-button">        <a id="more-label"><%= t 'actions.more' %></a>      </span>      <div class="slideButton">        <input type="checkbox" id="more-button" <%= session[:show_details] ? 'checked' : '' %> />        <label for="more-button"></label>      </div>      <section id="more-content" style="display: none;"></section>      <script>        function showDetails(updateFlag) {          if ($("#more-button").attr('checked')) {            $("#more-content").              html('<%= escape_javascript(render :partial => "layouts/loading") %>').              show(300).              load("<%= url_for(details_path(:grid => @grid.uuid,                                             :row => @row.uuid)) %>");            $("#more-title").addClass("highlighted");          }           else {            $("#more-title").removeClass("highlighted");            $("#more-content").hide(300);            if(updateFlag) $.ajax("/show_details/__unset");          }        };        showDetails(false);        $("#more-button").click(function (event){          showDetails(true);        });        $("#more-label").click(function (event){          $("#more-button").attr('checked', !$("#more-button").attr('checked'));          showDetails(true);        });      </script>    <% else %>      <span class="button user-button">        <%= link_to I18n.t('devise.sign_in'), new_session_path("user") %>      </span>    <% end %>  </article><% end %>