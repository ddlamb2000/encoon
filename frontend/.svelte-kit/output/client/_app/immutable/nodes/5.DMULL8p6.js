import{h as $t,a as _,t as U,c as tt,d as bt}from"../chunks/disclose-version.JDsS39X6.js";import{aD as te,u as ee,aE as ae,aj as re,z as se,p as oe,aF as ne,d as r,af as ie,s as S,f as V,t as B,a as ce,aG as le,ak as de,c as F,k as j,e as vt,r as z}from"../chunks/runtime.BU7-Umqy.js";import{d as ue,e as ve,s as X}from"../chunks/render.D-xr2h7m.js";import{p as ft,i as Q}from"../chunks/if.BqxraM_x.js";import{e as et,i as _t}from"../chunks/each.DxMKb2TO.js";import{r as fe,s as xt,a as wt}from"../chunks/attributes.DefEtgpS.js";import{t as O,s as me}from"../chunks/class.B8Krk8eY.js";import{p as pe}from"../chunks/props.CS1la27H.js";import{s as ye,a as he}from"../chunks/store.BPp8ZCxQ.js";import{p as ge,i as be,a as _e}from"../chunks/entry.yuD5Ub56.js";import{r as xe}from"../chunks/index.AfNryrFz.js";function kt(e,a,d){te(()=>{var c=ee(()=>a(e,d==null?void 0:d())||{});if(d&&(c!=null&&c.update)){var n=!1,f={};ae(()=>{var v=d();re(v),n&&se(f,v)&&(f=v,c.update(v))}),n=!0}if(c!=null&&c.destroy)return()=>c.destroy()})}function we(e){const a=JSON.parse(e);return a.data&&(a.data=ge(a.data)),a}function nt(e){return HTMLElement.prototype.cloneNode.call(e)}function it(e,a=()=>{}){const d=async({action:n,result:f,reset:v=!0,invalidateAll:m=!0})=>{f.type==="success"&&(v&&HTMLFormElement.prototype.reset.call(e),m&&await be()),(location.origin+location.pathname===n.origin+n.pathname||f.type==="redirect"||f.type==="error")&&_e(f)};async function c(n){var M,J,C,R,l;if(((M=n.submitter)!=null&&M.hasAttribute("formmethod")?n.submitter.formMethod:nt(e).method)!=="post")return;n.preventDefault();const v=new URL((J=n.submitter)!=null&&J.hasAttribute("formaction")?n.submitter.formAction:nt(e).action),m=(C=n.submitter)!=null&&C.hasAttribute("formenctype")?n.submitter.formEnctype:nt(e).enctype,y=new FormData(e),H=(R=n.submitter)==null?void 0:R.getAttribute("name");H&&y.append(H,((l=n.submitter)==null?void 0:l.getAttribute("value"))??"");const q=new AbortController;let D=!1;const T=await a({action:v,cancel:()=>D=!0,controller:q,formData:y,formElement:e,submitter:n.submitter})??d;if(D)return;let x;try{const o=new Headers({accept:"application/json","x-sveltekit-action":"true"});m!=="multipart/form-data"&&o.set("Content-Type",/^(:?application\/x-www-form-urlencoded|text\/plain)$/.test(m)?m:"application/x-www-form-urlencoded");const A=m==="multipart/form-data"?y:new URLSearchParams(y),s=await fetch(v,{method:"POST",headers:o,cache:"no-store",body:A,signal:q.signal});x=we(await s.text()),x.type==="error"&&(x.status=s.status)}catch(o){if((o==null?void 0:o.name)==="AbortError")return;x={type:"error",error:o}}T({action:v,formData:y,formElement:e,update:o=>d({action:v,result:x,reset:o==null?void 0:o.reset,invalidateAll:o==null?void 0:o.invalidateAll}),result:x})}return HTMLFormElement.prototype.addEventListener.call(e,"submit",c),{destroy(){HTMLFormElement.prototype.removeEventListener.call(e,"submit",c)}}}var jt="mz3PUW_p",At=["#FFC700","#FF0000","#2E3191","#41BBC7"],Pt=3500,zt=.5,Mt=150,Et="mix",Lt=12,St="",Wt=!0,Ut=800,Ht=1600;function ct(e,a={}){let{colors:d=At,duration:c=Pt,force:n=zt,particleCount:f=Mt,particleShape:v=Et,particleSize:m=Lt,particleClass:y=St,destroyAfterDone:H=Wt,stageHeight:q=Ut,stageWidth:D=Ht}=a;(function(l){if(document.querySelector("style[data-neoconfetti]"))return;const o=lt("style");o.dataset.neoconfetti="",o.textContent=l,dt(document.head,o)})('@keyframes mz3PUW_ya{to{translate:0 var(--sh)}}@keyframes mz3PUW_xa{to{translate:var(--xlp)0}}@keyframes mz3PUW_r{50%{rotate:var(--hr)180deg}to{rotate:var(--r)360deg}}.mz3PUW_c{z-index:1200;width:0;height:0;position:relative;overflow:visible}.mz3PUW_p{animation:xa var(--dc)forwards cubic-bezier(var(--x1),var(--x2),var(--x3),var(--x4));animation-name:mz3PUW_xa}.mz3PUW_p>div{animation:ya var(--dc)forwards cubic-bezier(var(--y1),var(--y2),var(--y3),var(--y4));width:var(--w);height:var(--h);animation-name:mz3PUW_ya;position:absolute;top:0;left:0}.mz3PUW_p>div:before{content:"";background-color:var(--bgc);animation:r var(--rd)infinite linear;border-radius:var(--br);width:100%;height:100%;animation-name:mz3PUW_r;display:block}'),e.classList.add("mz3PUW_c"),e.style.setProperty("--sh",q+"px");let N=[],T=[];const x=()=>Y(W()*(ze-1)),M=(l,o)=>v!=="rectangles"&&(l==="circles"||Me(o));function J(l,o){const A=x(),s=M(v,A),t=(h,g)=>l.style.setProperty(h,g+"");t("--xlp",ut(at(Dt(o,90)-180),0,180,-D/2,D/2)+"px"),t("--dc",c-Y(1e3*W())+"ms");const i=W()<je?G(W()*Ae,2):0;t("--x1",i),t("--x2",-1*i),t("--x3",i),t("--x4",G(at(ut(at(Dt(o,90)-180),0,180,-1,1)),4)),t("--y1",G(W()*Ct,4)),t("--y2",G(W()*n*(qt()?1:-1),4)),t("--y3",Ct),t("--y4",G(Pe(ut(at(o-180),0,180,n,-n),0),4)),t("--w",(s?m:Y(4*W())+m/2)+"px"),t("--h",(s?m:Y(2*W())+m)+"px");const u=A.toString(2).padStart(3,"0").split("");t("--hr",u.map(h=>+h/2+"").join(" ")),t("--r",u.join(" ")),t("--rd",G(W()*(ke-Tt)+Tt)+"ms"),t("--br",s?"50%":0)}let C;function R(){e.innerHTML="",clearTimeout(C),N=Ft(f,d),T=function(l,o=[],A){const s=[];for(const{color:t}of o){const i=lt("div");i.className=`${jt} ${A}`,i.style.setProperty("--bgc",t);const u=lt("div");dt(i,u),dt(l,i),s.push(i)}return s}(e,N,y);for(const[l,o]of Nt(T))J(o,N[+l].degree);C=setTimeout(()=>{H&&(e.innerHTML="")},c)}return R(),{update(l){const o=l.particleCount??Mt,A=l.particleShape??Et,s=l.particleSize??Lt,t=l.particleClass??St,i=l.colors??At,u=l.stageHeight??Ut,h=l.duration??Pt,g=l.force??zt,p=l.stageWidth??Ht,w=l.destroyAfterDone??Wt;N=Ft(o,i);let E=!1;if(o===f){T=Array.from(e.querySelectorAll(`.${jt}`));for(const[b,{color:k}]of Nt(N)){const L=T[+b];JSON.stringify(d)!==JSON.stringify(i)&&L.style.setProperty("--bgc",k),A!==v&&L.style.setProperty("--br",M(A,x())?"50%":"0"),t!==y&&(y&&L.classList.remove(y),t&&L.classList.add(t))}}else E=!0;H&&!w&&clearTimeout(C),e.style.setProperty("--sh",u+"px"),c=h,d=i,n=g,f=o,v=A,m=s,y=t,H=w,q=u,D=p,E&&R()},destroy(){e.innerHTML="",clearTimeout(C)}}}var Tt=200,ke=800,je=.1,Ae=.3,Ct=.5,at=Math.abs,W=Math.random,Y=Math.round,Pe=Math.max,lt=e=>document.createElement(e),dt=(e,a)=>e.appendChild(a),Ft=(e,a)=>Array.from({length:e},(d,c)=>({color:a[c%a.length],degree:360*c/e})),G=(e,a=2)=>Y((e+Number.EPSILON)*10**a)/10**a,ut=(e,a,d,c,n)=>(e-a)*(n-c)/(d-a)+c,Dt=(e,a)=>e+a>360?e+a-360:e+a,qt=()=>W()>.5,Nt=Object.entries,ze=6,Me=e=>e!==1&&qt();const Jt="(prefers-reduced-motion: reduce)",Ee=()=>window.matchMedia(Jt).matches,Le=xe(Ee(),e=>{{const a=c=>{e(c.matches)},d=window.matchMedia(Jt);return d.addEventListener("change",a),()=>{d.removeEventListener("change",a)}}});function Ot(e,a,d){var n;e.preventDefault();const c=e.target.getAttribute("data-key");c==="backspace"?(vt(a,ft(r(a).slice(0,-1))),(n=d())!=null&&n.badGuess&&d(d().badGuess=!1,!0)):r(a).length<5&&vt(a,r(a)+c)}var Se=U('<meta name="description" content="A Wordle clone written in SvelteKit" class="svelte-1pg2j5l">'),We=U('<div class="letter svelte-1pg2j5l"> <span class="visually-hidden svelte-1pg2j5l"><!></span> <input name="guess" type="hidden" class="svelte-1pg2j5l"></div>'),Ue=U('<h2 class="visually-hidden svelte-1pg2j5l"> </h2> <div class="row svelte-1pg2j5l"></div>',1),He=U('<p class="svelte-1pg2j5l"> </p>'),Te=U('<!> <button data-key="enter" class="restart selected svelte-1pg2j5l" formaction="?/restart"> </button>',1),Ce=U('<button formaction="?/update" name="key"> </button>'),Fe=U('<div class="row svelte-1pg2j5l"></div>'),De=U('<div class="keyboard svelte-1pg2j5l"><button data-key="enter" class="svelte-1pg2j5l">enter</button> <button data-key="backspace" formaction="?/update" name="key" value="backspace" class="svelte-1pg2j5l">back</button> <!></div>'),Ne=U('<div style="position: absolute; left: 50%; top: 30%" class="svelte-1pg2j5l"></div>'),Oe=U('<h1 class="visually-hidden svelte-1pg2j5l">Sverdle</h1> <form method="post" action="?/enter" class="svelte-1pg2j5l"><a class="how-to-play svelte-1pg2j5l" href="/sverdle/how-to-play">How to play</a> <div class="grid svelte-1pg2j5l"></div> <div class="controls svelte-1pg2j5l"><!></div></form> <!>',1);function Ze(e,a){oe(a,!0);const d=ye(),c=()=>he(Le,"$reducedMotion",d);let n=pe(a,"form",15),f=j(()=>a.data.answers.at(-1)==="xxxxx"),v=j(()=>r(f)?-1:a.data.answers.length),m=ne(ft(a.data.guesses[r(v)]||""));ie(()=>{vt(m,ft(a.data.guesses[r(v)]||""))});let y=j(()=>r(m).length===5);const H=j(()=>{let s={},t={};return a.data.answers.forEach((i,u)=>{const h=a.data.guesses[u];for(let g=0;g<5;g+=1){const p=h[g];i[g]==="x"?(s[p]="exact",t[p]="correct"):s[p]||(s[p]=i[g]==="c"?"close":"missing",t[p]=i[g]==="c"?"present":"absent")}}),{classnames:s,description:t}}),q=j(()=>r(H).classnames),D=j(()=>r(H).description);function N(s){var t;s.metaKey||s.key==="Enter"&&!r(y)||(t=document.querySelector(`[data-key="${s.key}" i]`))==null||t.dispatchEvent(new MouseEvent("click",{cancelable:!0}))}var T=Oe();ve("keydown",le,N),$t(s=>{var t=Se();de.title="Sverdle",_(s,t)});var x=S(V(T),2),M=S(F(x),2);et(M,20,()=>Array.from(Array(6).keys()),s=>s,(s,t)=>{var i=Ue();const u=j(()=>t===r(v));var h=V(i),g=F(h);z(h);var p=S(h,2);et(p,20,()=>Array.from(Array(5).keys()),w=>w,(w,E)=>{var b=We();const k=j(()=>r(u)?r(m):a.data.guesses[t]),L=j(()=>{var P;return(P=a.data.answers[t])==null?void 0:P[E]}),mt=j(()=>{var P;return((P=r(k))==null?void 0:P[E])??""}),Rt=j(()=>r(u)&&E===r(k).length),pt=j(()=>r(L)==="x"),yt=j(()=>r(L)==="c"),ht=j(()=>r(L)==="_");var gt=F(b),rt=S(gt),Bt=F(rt);{var It=P=>{var Z=tt("(correct)");_(P,Z)},Kt=P=>{var Z=bt(),Qt=V(Z);{var Gt=I=>{var $=tt("(present)");_(I,$)},Vt=I=>{var $=bt(),Xt=V($);{var Yt=K=>{var ot=tt("(absent)");_(K,ot)},Zt=K=>{var ot=tt("empty");_(K,ot)};Q(Xt,K=>{r(ht)?K(Yt):K(Zt,!1)},!0)}_(I,$)};Q(Qt,I=>{r(yt)?I(Gt):I(Vt,!1)},!0)}_(P,Z)};Q(Bt,P=>{r(pt)?P(It):P(Kt,!1)})}z(rt);var st=S(rt,2);fe(st),z(b),B(()=>{O(b,"exact",r(pt)),O(b,"close",r(yt)),O(b,"missing",r(ht)),O(b,"selected",r(Rt)),X(gt,`${r(mt)??""} `),st.disabled=!r(u),xt(st,r(mt))}),_(w,b)}),z(p),B(()=>{X(g,`Row ${t+1}`),O(p,"current",r(u))}),_(s,i)}),z(M);var J=S(M,2),C=F(J);{var R=s=>{var t=Te(),i=V(t);{var u=p=>{var w=He(),E=F(w);z(w),B(()=>X(E,`the answer was "${a.data.answer??""}"`)),_(p,w)};Q(i,p=>{!r(f)&&a.data.answer&&p(u)})}var h=S(i,2),g=F(h);z(h),B(()=>X(g,`${(r(f)?"you won :)":"game over :(")??""} play again?`)),_(s,t)},l=s=>{var t=De(),i=F(t),u=S(i,2);u.__click=[Ot,m,n];var h=S(u,2);et(h,16,()=>["qwertyuiop","asdfghjkl","zxcvbnm"],_t,(g,p)=>{var w=Fe();et(w,21,()=>p,_t,(E,b)=>{var k=Ce();k.__click=[Ot,m,n];var L=F(k,!0);z(k),B(()=>{wt(k,"data-key",r(b)),me(k,`${r(q)[r(b)]??""} svelte-1pg2j5l`),k.disabled=r(y),xt(k,r(b)),wt(k,"aria-label",`${r(b)??""} ${(r(D)[r(b)]||"")??""}`),X(L,r(b))}),_(E,k)}),z(w),_(g,w)}),z(t),B(()=>{i.disabled=!r(y),O(i,"selected",r(y))}),_(s,t)};Q(C,s=>{r(f)||a.data.answers.length>=6?s(R):s(l,!1)})}z(J),z(x),kt(x,(s,t)=>it==null?void 0:it(s,t),()=>()=>({update:s})=>{s({reset:!1})});var o=S(x,2);{var A=s=>{var t=Ne();kt(t,(i,u)=>ct==null?void 0:ct(i,u),()=>({particleCount:c()?0:void 0,force:.7,stageWidth:window.innerWidth,stageHeight:window.innerHeight,colors:["#ff3e00","#40b3ff","#676778"]})),_(s,t)};Q(o,s=>{r(f)&&s(A)})}B(()=>{var s;O(M,"playing",!r(f)),O(M,"bad-guess",(s=n())==null?void 0:s.badGuess)}),_(e,T),ce()}ue(["click"]);export{Ze as component};
